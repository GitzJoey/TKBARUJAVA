/**
*
* @license Guriddo jqGrid JS - v4.7.1 - 2015-02-12
* Copyright(c) 2008, Tony Tomov, tony@trirand.com
* 
* License: http://guriddo.net/?page_id=103334
*/
!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./grid.base","./grid.common"],a):a(jQuery)}(function(a){"use strict";var b={};a.jgrid.extend({editGridRow:function(c,d){var e=a.jgrid.getRegional(this[0],"edit");return d=a.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0,overlayClass:"ui-widget-overlay",removemodal:!0,form:"edit",template:null},e,d||{}),b[a(this)[0].p.id]=d,this.each(function(){function e(){return a(x).find(".FormElement").each(function(){var c=a(".customelement",this);if(c.length){var d=c[0],e=a(d).attr("name");a.each(p.p.colModel,function(){if(this.name===e&&this.editoptions&&a.isFunction(this.editoptions.custom_value)){try{if(r[e]=this.editoptions.custom_value.call(p,a("#"+a.jgrid.jqID(e),x),"get"),void 0===r[e])throw"e1"}catch(c){"e1"===c?a.jgrid.info_dialog(D.errcap,"function 'custom_value' "+b[a(this)[0]].p.msg.novalue,b[a(this)[0]].p.bClose):a.jgrid.info_dialog(D.errcap,c.message,b[a(this)[0]].p.bClose)}return!0}})}else{switch(a(this).get(0).type){case"checkbox":if(a(this).is(":checked"))r[this.name]=a(this).val();else{var f=a(this).attr("offval");r[this.name]=f}break;case"select-one":r[this.name]=a("option:selected",this).val();break;case"select-multiple":r[this.name]=a(this).val(),r[this.name]=r[this.name]?r[this.name].join(","):"";var g=[];a("option:selected",this).each(function(b,c){g[b]=a(c).text()});break;case"password":case"text":case"textarea":case"button":r[this.name]=a(this).val()}p.p.autoencode&&(r[this.name]=a.jgrid.htmlEncode(r[this.name]))}}),!0}function f(c,d,e,f){var g,h,i,j,k,l,m,n=0,o=[],q=!1,r="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",s="";for(m=1;f>=m;m++)s+=r;if("_empty"!==c&&(q=a(d).jqGrid("getInd",c)),a(d.p.colModel).each(function(m){if(g=this.name,h=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,k=h?"style='display:none'":"","cb"!==g&&"subgrid"!==g&&this.editable===!0&&"rn"!==g){if(q===!1)j="";else if(g===d.p.ExpandColumn&&d.p.treeGrid===!0)j=a("td[role='gridcell']:eq("+m+")",d.rows[q]).text();else{try{j=a.unformat.call(d,a("td[role='gridcell']:eq("+m+")",d.rows[q]),{rowId:c,colModel:this},m)}catch(r){j=this.edittype&&"textarea"===this.edittype?a("td[role='gridcell']:eq("+m+")",d.rows[q]).text():a("td[role='gridcell']:eq("+m+")",d.rows[q]).html()}(!j||"&nbsp;"===j||"&#160;"===j||1===j.length&&160===j.charCodeAt(0))&&(j="")}var t=a.extend({},this.editoptions||{},{id:g,name:g,rowId:c,oper:"edit"}),u=a.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),w=parseInt(u.rowpos,10)||n+1,x=parseInt(2*(parseInt(u.colpos,10)||1),10);if("_empty"===c&&t.defaultValue&&(j=a.isFunction(t.defaultValue)?t.defaultValue.call(p):t.defaultValue),this.edittype||(this.edittype="text"),p.p.autoencode&&(j=a.jgrid.htmlDecode(j)),l=a.jgrid.createEl.call(p,this.edittype,t,j,!1,a.extend({},a.jgrid.ajaxOptions,d.p.ajaxSelectOptions||{})),(b[p.p.id].checkOnSubmit||b[p.p.id].checkOnUpdate)&&(b[p.p.id]._savedData[g]=j),a(l).addClass("FormElement"),a.inArray(this.edittype,["text","textarea","password","select"])>-1&&a(l).addClass("ui-widget-content ui-corner-all"),C)a(I).find("#"+g).replaceWith(l);else{if(i=a(e).find("tr[rowpos="+w+"]"),u.rowabove){var y=a("<tr><td class='contentinfo' colspan='"+2*f+"'>"+u.rowcontent+"</td></tr>");a(e).append(y),y[0].rp=w}0===i.length&&(i=a("<tr "+k+" rowpos='"+w+"'></tr>").addClass("FormData").attr("id","tr_"+g),a(i).append(s),a(e).append(i),i[0].rp=w),a("td:eq("+(x-2)+")",i[0]).html(void 0===u.label?d.p.colNames[m]:u.label),a("td:eq("+(x-1)+")",i[0]).append(u.elmprefix).append(l).append(u.elmsuffix)}"custom"===this.edittype&&a.isFunction(t.custom_value)&&t.custom_value.call(p,a("#"+g,v),"set",j),a.jgrid.bindEv.call(p,l,t),o[n]=m,n++}}),n>0){var t;C?(t="<div class='FormData' style='display:none'><input class='FormElement' id='id_g' type='text' name='"+d.p.id+"_id' value='"+c+"'/>",a(I).append(t)):(t=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*f-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+d.p.id+"_id' value='"+c+"'/></td></tr>"),t[0].rp=n+999,a(e).append(t)),(b[p.p.id].checkOnSubmit||b[p.p.id].checkOnUpdate)&&(b[p.p.id]._savedData[d.p.id+"_id"]=c)}return o}function g(c,d,e){var f,g,h,i,j,k,l=0;(b[p.p.id].checkOnSubmit||b[p.p.id].checkOnUpdate)&&(b[p.p.id]._savedData={},b[p.p.id]._savedData[d.p.id+"_id"]=c);var m=d.p.colModel;if("_empty"===c)return a(m).each(function(){f=this.name,i=a.extend({},this.editoptions||{}),h=a("#"+a.jgrid.jqID(f),e),h&&h.length&&null!==h[0]&&(j="","custom"===this.edittype&&a.isFunction(i.custom_value)?i.custom_value.call(p,a("#"+f,e),"set",j):i.defaultValue?(j=a.isFunction(i.defaultValue)?i.defaultValue.call(p):i.defaultValue,"checkbox"===h[0].type?(k=j.toLowerCase(),k.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==k?(h[0].checked=!0,h[0].defaultChecked=!0,h[0].value=j):(h[0].checked=!1,h[0].defaultChecked=!1)):h.val(j)):"checkbox"===h[0].type?(h[0].checked=!1,h[0].defaultChecked=!1,j=a(h).attr("offval")):h[0].type&&"select"===h[0].type.substr(0,6)?h[0].selectedIndex=0:h.val(j),(b[p.p.id].checkOnSubmit===!0||b[p.p.id].checkOnUpdate)&&(b[p.p.id]._savedData[f]=j))}),void a("#id_g",e).val(c);var n=a(d).jqGrid("getInd",c,!0);n&&(a('td[role="gridcell"]',n).each(function(h){if(f=m[h].name,"cb"!==f&&"subgrid"!==f&&"rn"!==f&&m[h].editable===!0){if(f===d.p.ExpandColumn&&d.p.treeGrid===!0)g=a(this).text();else try{g=a.unformat.call(d,a(this),{rowId:c,colModel:m[h]},h)}catch(i){g="textarea"===m[h].edittype?a(this).text():a(this).html()}switch(p.p.autoencode&&(g=a.jgrid.htmlDecode(g)),(b[p.p.id].checkOnSubmit===!0||b[p.p.id].checkOnUpdate)&&(b[p.p.id]._savedData[f]=g),f=a.jgrid.jqID(f),m[h].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"===g||"&#160;"===g||1===g.length&&160===g.charCodeAt(0))&&(g=""),a("#"+f,e).val(g);break;case"select":var j=g.split(",");j=a.map(j,function(b){return a.trim(b)}),a("#"+f+" option",e).each(function(){this.selected=m[h].editoptions.multiple||a.trim(g)!==a.trim(a(this).text())&&j[0]!==a.trim(a(this).text())&&j[0]!==a.trim(a(this).val())?m[h].editoptions.multiple&&(a.inArray(a.trim(a(this).text()),j)>-1||a.inArray(a.trim(a(this).val()),j)>-1)?!0:!1:!0});break;case"checkbox":if(g=String(g),m[h].editoptions&&m[h].editoptions.value){var k=m[h].editoptions.value.split(":");a("#"+f,e)[p.p.useProp?"prop":"attr"](k[0]===g?{checked:!0,defaultChecked:!0}:{checked:!1,defaultChecked:!1})}else g=g.toLowerCase(),g.search(/(false|f|0|no|n|off|undefined)/i)<0&&""!==g?(a("#"+f,e)[p.p.useProp?"prop":"attr"]("checked",!0),a("#"+f,e)[p.p.useProp?"prop":"attr"]("defaultChecked",!0)):(a("#"+f,e)[p.p.useProp?"prop":"attr"]("checked",!1),a("#"+f,e)[p.p.useProp?"prop":"attr"]("defaultChecked",!1));break;case"custom":try{if(!m[h].editoptions||!a.isFunction(m[h].editoptions.custom_value))throw"e1";m[h].editoptions.custom_value.call(p,a("#"+f,e),"set",g)}catch(n){"e1"===n?a.jgrid.info_dialog(D.errcap,"function 'custom_value' "+b[a(this)[0]].p.msg.nodefined,a.rp_ge[a(this)[0]].p.bClose):a.jgrid.info_dialog(D.errcap,n.message,a.rp_ge[a(this)[0]].p.bClose)}}l++}}),l>0&&a("#id_g",x).val(c))}function h(){a.each(p.p.colModel,function(a,b){b.editoptions&&b.editoptions.NullIfEmpty===!0&&r.hasOwnProperty(b.name)&&""===r[b.name]&&(r[b.name]="null")})}function i(){var c,e,f,i,j,k,l,m=[!0,"",""],n={},o=p.p.prmNames,q=a(p).triggerHandler("jqGridAddEditBeforeCheckValues",[a(v),t]);q&&"object"==typeof q&&(r=q),a.isFunction(b[p.p.id].beforeCheckValues)&&(q=b[p.p.id].beforeCheckValues.call(p,r,a(v),t),q&&"object"==typeof q&&(r=q));for(i in r)if(r.hasOwnProperty(i)&&(m=a.jgrid.checkValues.call(p,r[i],i),m[0]===!1))break;if(h(),m[0]&&(n=a(p).triggerHandler("jqGridAddEditClickSubmit",[b[p.p.id],r,t]),void 0===n&&a.isFunction(b[p.p.id].onclickSubmit)&&(n=b[p.p.id].onclickSubmit.call(p,b[p.p.id],r,t)||{}),m=a(p).triggerHandler("jqGridAddEditBeforeSubmit",[r,a(v),t]),void 0===m&&(m=[!0,"",""]),m[0]&&a.isFunction(b[p.p.id].beforeSubmit)&&(m=b[p.p.id].beforeSubmit.call(p,r,a(v),t))),m[0]&&!b[p.p.id].processing){if(b[p.p.id].processing=!0,a("#sData",x+"_2").addClass("ui-state-active"),l=b[p.p.id].url||a(p).jqGrid("getGridParam","editurl"),f=o.oper,e="clientArray"===l?p.p.keyName:o.id,r[f]="_empty"===a.trim(r[p.p.id+"_id"])?o.addoper:o.editoper,r[f]!==o.addoper?r[e]=r[p.p.id+"_id"]:void 0===r[e]&&(r[e]=r[p.p.id+"_id"]),delete r[p.p.id+"_id"],r=a.extend(r,b[p.p.id].editData,n),p.p.treeGrid===!0){if(r[f]===o.addoper){j=a(p).jqGrid("getGridParam","selrow");var s="adjacency"===p.p.treeGridModel?p.p.treeReader.parent_id_field:"parent_id";r[s]=j}for(k in p.p.treeReader)if(p.p.treeReader.hasOwnProperty(k)){var w=p.p.treeReader[k];if(r.hasOwnProperty(w)){if(r[f]===o.addoper&&"parent_id_field"===k)continue;delete r[w]}}}r[e]=a.jgrid.stripPref(p.p.idPrefix,r[e]);var z=a.extend({url:l,type:b[p.p.id].mtype,data:a.isFunction(b[p.p.id].serializeEditData)?b[p.p.id].serializeEditData.call(p,r):r,complete:function(h,i){var k;if(a("#sData",x+"_2").removeClass("ui-state-active"),r[e]=p.p.idPrefix+r[e],h.status>=300&&304!==h.status?(m[0]=!1,m[1]=a(p).triggerHandler("jqGridAddEditErrorTextFormat",[h,t]),m[1]=a.isFunction(b[p.p.id].errorTextFormat)?b[p.p.id].errorTextFormat.call(p,h,t):i+" Status: '"+h.statusText+"'. Error code: "+h.status):(m=a(p).triggerHandler("jqGridAddEditAfterSubmit",[h,r,t]),void 0===m&&(m=[!0,"",""]),m[0]&&a.isFunction(b[p.p.id].afterSubmit)&&(m=b[p.p.id].afterSubmit.call(p,h,r,t))),m[0]===!1)a(".FormError",v).html(m[1]),a(".FormError",v).show();else if(p.p.autoencode&&a.each(r,function(b,c){r[b]=a.jgrid.htmlDecode(c)}),r[f]===o.addoper?(m[2]||(m[2]=a.jgrid.randId()),null==r[e]||"_empty"===r[e]?r[e]=m[2]:m[2]=r[e],b[p.p.id].reloadAfterSubmit?a(p).trigger("reloadGrid"):p.p.treeGrid===!0?a(p).jqGrid("addChildNode",m[2],j,r):a(p).jqGrid("addRowData",m[2],r,d.addedrow),b[p.p.id].closeAfterAdd?(p.p.treeGrid!==!0&&a(p).jqGrid("setSelection",m[2]),a.jgrid.hideModal("#"+a.jgrid.jqID(y.themodal),{gb:"#gbox_"+a.jgrid.jqID(u),jqm:d.jqModal,onClose:b[p.p.id].onClose,removemodal:b[p.p.id].removemodal,formprop:!b[p.p.id].recreateForm,form:b[p.p.id].form})):b[p.p.id].clearAfterAdd&&g("_empty",p,v)):(b[p.p.id].reloadAfterSubmit?(a(p).trigger("reloadGrid"),b[p.p.id].closeAfterEdit||setTimeout(function(){a(p).jqGrid("setSelection",r[e])},1e3)):p.p.treeGrid===!0?a(p).jqGrid("setTreeRow",r[e],r):a(p).jqGrid("setRowData",r[e],r),b[p.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(y.themodal),{gb:"#gbox_"+a.jgrid.jqID(u),jqm:d.jqModal,onClose:b[p.p.id].onClose,removemodal:b[p.p.id].removemodal,formprop:!b[p.p.id].recreateForm,form:b[p.p.id].form})),a.isFunction(b[p.p.id].afterComplete)&&(c=h,setTimeout(function(){a(p).triggerHandler("jqGridAddEditAfterComplete",[c,r,a(v),t]),b[p.p.id].afterComplete.call(p,c,r,a(v),t),c=null},500)),(b[p.p.id].checkOnSubmit||b[p.p.id].checkOnUpdate)&&(a(v).data("disabled",!1),"_empty"!==b[p.p.id]._savedData[p.p.id+"_id"]))for(k in b[p.p.id]._savedData)b[p.p.id]._savedData.hasOwnProperty(k)&&r[k]&&(b[p.p.id]._savedData[k]=r[k]);b[p.p.id].processing=!1;try{a(":input:visible",v)[0].focus()}catch(l){}}},a.jgrid.ajaxOptions,b[p.p.id].ajaxEditOptions);if(z.url||b[p.p.id].useDataProxy||(a.isFunction(p.p.dataProxy)?b[p.p.id].useDataProxy=!0:(m[0]=!1,m[1]+=" "+D.nourl)),m[0])if(b[p.p.id].useDataProxy){var A=p.p.dataProxy.call(p,z,"set_"+p.p.id);void 0===A&&(A=[!0,""]),A[0]===!1?(m[0]=!1,m[1]=A[1]||"Error deleting the selected row!"):(z.data.oper===o.addoper&&b[p.p.id].closeAfterAdd&&a.jgrid.hideModal("#"+a.jgrid.jqID(y.themodal),{gb:"#gbox_"+a.jgrid.jqID(u),jqm:d.jqModal,onClose:b[p.p.id].onClose,removemodal:b[p.p.id].removemodal,formprop:!b[p.p.id].recreateForm,form:b[p.p.id].form}),z.data.oper===o.editoper&&b[p.p.id].closeAfterEdit&&a.jgrid.hideModal("#"+a.jgrid.jqID(y.themodal),{gb:"#gbox_"+a.jgrid.jqID(u),jqm:d.jqModal,onClose:b[p.p.id].onClose,removemodal:b[p.p.id].removemodal,formprop:!b[p.p.id].recreateForm,form:b[p.p.id].form}))}else"clientArray"===z.url?(b[p.p.id].reloadAfterSubmit=!1,r=z.data,z.complete({status:200,statusText:""},"")):a.ajax(z)}m[0]===!1&&(a(".FormError",v).html(m[1]),a(".FormError",v).show())}function j(a,b){var c,d=!1;for(c in a)if(a.hasOwnProperty(c)&&a[c]!=b[c]){d=!0;break}return d}function k(){var c=!0;return a(".FormError",v).hide(),b[p.p.id].checkOnUpdate&&(r={},e(),s=j(r,b[p.p.id]._savedData),s&&(a(v).data("disabled",!0),a(".confirm","#"+y.themodal).show(),c=!1)),c}function l(){var b;if("_empty"!==c&&void 0!==p.p.savedRow&&p.p.savedRow.length>0&&a.isFunction(a.fn.jqGrid.restoreRow))for(b=0;b<p.p.savedRow.length;b++)if(p.p.savedRow[b].id===c){a(p).jqGrid("restoreRow",c);break}}function m(b,c){var d=c[1].length-1;0===b?a("#pData",q).addClass("ui-state-disabled"):void 0!==c[1][b-1]&&a("#"+a.jgrid.jqID(c[1][b-1])).hasClass("ui-state-disabled")?a("#pData",q).addClass("ui-state-disabled"):a("#pData",q).removeClass("ui-state-disabled"),b===d?a("#nData",q).addClass("ui-state-disabled"):void 0!==c[1][b+1]&&a("#"+a.jgrid.jqID(c[1][b+1])).hasClass("ui-state-disabled")?a("#nData",q).addClass("ui-state-disabled"):a("#nData",q).removeClass("ui-state-disabled")}function n(){var b=a(p).jqGrid("getDataIDs"),c=a("#id_g",x).val(),d=a.inArray(c,b);return[d,b]}function o(a){var b="";return"string"==typeof a&&(b=a.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(a,b){return'<span id="'+b+'" ></span>'})),b}var p=this;if(p.grid&&c){var q,r,s,t,u=p.p.id,v="FrmGrid_"+u,w="TblGrid_"+u,x="#"+a.jgrid.jqID(w),y={themodal:"editmod"+u,modalhead:"edithd"+u,modalcontent:"editcnt"+u,scrollelm:v},z=!0,A=1,B=0,C="string"==typeof b[p.p.id].template&&b[p.p.id].template.length>0,D=a.jgrid.getRegional(this,"errors");"new"===c?(c="_empty",t="add",d.caption=b[p.p.id].addCaption):(d.caption=b[p.p.id].editCaption,t="edit"),d.recreateForm||a(p).data("formProp")&&a.extend(b[a(this)[0].p.id],a(p).data("formProp"));var E=!0;d.checkOnUpdate&&d.jqModal&&!d.modal&&(E=!1);var F,G=isNaN(b[a(this)[0].p.id].dataheight)?b[a(this)[0].p.id].dataheight:b[a(this)[0].p.id].dataheight+"px",H=isNaN(b[a(this)[0].p.id].datawidth)?b[a(this)[0].p.id].datawidth:b[a(this)[0].p.id].datawidth+"px",I=a("<form name='FormPost' id='"+v+"' class='FormGrid' onSubmit='return false;' style='width:"+H+";overflow:auto;position:relative;height:"+G+";'></form>").data("disabled",!1);if(C?(F=o(b[a(this)[0].p.id].template),q=x):(F=a("<table id='"+w+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),q=x+"_2"),v="#"+a.jgrid.jqID(v),a(I).append("<div class='FormError ui-state-error' style='display:none;'></div>"),a(I).append("<div class='tinfo topinfo'>"+b[p.p.id].topinfo+"</div>"),a(p.p.colModel).each(function(){var a=this.formoptions;A=Math.max(A,a?a.colpos||0:0),B=Math.max(B,a?a.rowpos||0:0)}),a(I).append(F),z=a(p).triggerHandler("jqGridAddEditBeforeInitData",[I,t]),void 0===z&&(z=!0),z&&a.isFunction(b[p.p.id].beforeInitData)&&(z=b[p.p.id].beforeInitData.call(p,I,t)),z!==!1){l(),f(c,p,F,A);var J="rtl"===p.p.direction?!0:!1,K=J?"nData":"pData",L=J?"pData":"nData",M="<a id='"+K+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",N="<a id='"+L+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",O="<a id='sData' class='fm-button ui-state-default ui-corner-all'>"+d.bSubmit+"</a>",P="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+d.bCancel+"</a>",Q="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+w+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(J?N+M:M+N)+"</td><td class='EditButton'>"+O+P+"</td></tr>";if(Q+="</tbody></table>",B>0){var R=[];a.each(a(F)[0].rows,function(a,b){R[a]=b}),R.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),a.each(R,function(b,c){a("tbody",F).append(c)})}d.gbox="#gbox_"+a.jgrid.jqID(u);var S=!1;d.closeOnEscape===!0&&(d.closeOnEscape=!1,S=!0);var T;if(C?(a(I).find("#pData").replaceWith(M),a(I).find("#nData").replaceWith(N),a(I).find("#sData").replaceWith(O),a(I).find("#cData").replaceWith(P),T=a("<div id="+w+"></div>").append(I)):T=a("<div></div>").append(I).append(Q),a(I).append("<div class='binfo topinfo bottominfo'>"+b[p.p.id].bottominfo+"</div>"),a.jgrid.createModal(y,T,b[a(this)[0].p.id],"#gview_"+a.jgrid.jqID(p.p.id),a("#gbox_"+a.jgrid.jqID(p.p.id))[0]),J&&(a("#pData, #nData",x+"_2").css("float","right"),a(".EditButton",x+"_2").css("text-align","left")),b[p.p.id].topinfo&&a(".tinfo",v).show(),b[p.p.id].bottominfo&&a(".binfo",v).show(),T=null,Q=null,a("#"+a.jgrid.jqID(y.themodal)).keydown(function(c){var e=c.target;if(a(v).data("disabled")===!0)return!1;if(b[p.p.id].savekey[0]===!0&&c.which===b[p.p.id].savekey[1]&&"TEXTAREA"!==e.tagName)return a("#sData",x+"_2").trigger("click"),!1;if(27===c.which)return k()?(S&&a.jgrid.hideModal("#"+a.jgrid.jqID(y.themodal),{gb:d.gbox,jqm:d.jqModal,onClose:b[p.p.id].onClose,removemodal:b[p.p.id].removemodal,formprop:!b[p.p.id].recreateForm,form:b[p.p.id].form}),!1):!1;if(b[p.p.id].navkeys[0]===!0){if("_empty"===a("#id_g",x).val())return!0;if(c.which===b[p.p.id].navkeys[1])return a("#pData",q).trigger("click"),!1;if(c.which===b[p.p.id].navkeys[2])return a("#nData",q).trigger("click"),!1}}),d.checkOnUpdate&&(a("a.ui-jqdialog-titlebar-close span","#"+a.jgrid.jqID(y.themodal)).removeClass("jqmClose"),a("a.ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(y.themodal)).unbind("click").click(function(){return k()?(a.jgrid.hideModal("#"+a.jgrid.jqID(y.themodal),{gb:"#gbox_"+a.jgrid.jqID(u),jqm:d.jqModal,onClose:b[p.p.id].onClose,removemodal:b[p.p.id].removemodal,formprop:!b[p.p.id].recreateForm,form:b[p.p.id].form}),!1):!1})),d.saveicon=a.extend([!0,"left","ui-icon-disk"],d.saveicon),d.closeicon=a.extend([!0,"left","ui-icon-close"],d.closeicon),d.saveicon[0]===!0&&a("#sData",q).addClass("right"===d.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.saveicon[2]+"'></span>"),d.closeicon[0]===!0&&a("#cData",q).addClass("right"===d.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.closeicon[2]+"'></span>"),b[p.p.id].checkOnSubmit||b[p.p.id].checkOnUpdate){O="<a id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bYes+"</a>",N="<a id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bNo+"</a>",P="<a id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+d.bExit+"</a>";var U=d.zIndex||999;U++,a("<div class='"+d.overlayClass+" jqgrid-overlay confirm' style='z-index:"+U+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(U+1)+"'>"+d.saveData+"<br/><br/>"+O+N+P+"</div>").insertAfter(v),a("#sNew","#"+a.jgrid.jqID(y.themodal)).click(function(){return i(),a(v).data("disabled",!1),a(".confirm","#"+a.jgrid.jqID(y.themodal)).hide(),!1}),a("#nNew","#"+a.jgrid.jqID(y.themodal)).click(function(){return a(".confirm","#"+a.jgrid.jqID(y.themodal)).hide(),a(v).data("disabled",!1),setTimeout(function(){a(":input:visible",v)[0].focus()},0),!1}),a("#cNew","#"+a.jgrid.jqID(y.themodal)).click(function(){return a(".confirm","#"+a.jgrid.jqID(y.themodal)).hide(),a(v).data("disabled",!1),a.jgrid.hideModal("#"+a.jgrid.jqID(y.themodal),{gb:"#gbox_"+a.jgrid.jqID(u),jqm:d.jqModal,onClose:b[p.p.id].onClose,removemodal:b[p.p.id].removemodal,formprop:!b[p.p.id].recreateForm,form:b[p.p.id].form}),!1})}a(p).triggerHandler("jqGridAddEditInitializeForm",[a(v),t]),a.isFunction(b[p.p.id].onInitializeForm)&&b[p.p.id].onInitializeForm.call(p,a(v),t),"_empty"!==c&&b[p.p.id].viewPagerButtons?a("#pData,#nData",q).show():a("#pData,#nData",q).hide(),a(p).triggerHandler("jqGridAddEditBeforeShowForm",[a(v),t]),a.isFunction(b[p.p.id].beforeShowForm)&&b[p.p.id].beforeShowForm.call(p,a(v),t),a("#"+a.jgrid.jqID(y.themodal)).data("onClose",b[p.p.id].onClose),a.jgrid.viewModal("#"+a.jgrid.jqID(y.themodal),{gbox:"#gbox_"+a.jgrid.jqID(u),jqm:d.jqModal,overlay:d.overlay,modal:d.modal,overlayClass:d.overlayClass,onHide:function(b){var c=a("#editmod"+u)[0].style.height;c.indexOf("px")>-1&&(c=parseFloat(c)),a(p).data("formProp",{top:parseFloat(a(b.w).css("top")),left:parseFloat(a(b.w).css("left")),width:a(b.w).width(),height:c,dataheight:a(v).height(),datawidth:a(v).width()}),b.w.remove(),b.o&&b.o.remove()}}),E||a("."+a.jgrid.jqID(d.overlayClass)).click(function(){return k()?(a.jgrid.hideModal("#"+a.jgrid.jqID(y.themodal),{gb:"#gbox_"+a.jgrid.jqID(u),jqm:d.jqModal,onClose:b[p.p.id].onClose,removemodal:b[p.p.id].removemodal,formprop:!b[p.p.id].recreateForm,form:b[p.p.id].form}),!1):!1}),a(".fm-button","#"+a.jgrid.jqID(y.themodal)).hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),a("#sData",q).click(function(){return r={},a(".FormError",v).hide(),e(),"_empty"===r[p.p.id+"_id"]?i():d.checkOnSubmit===!0?(s=j(r,b[p.p.id]._savedData),s?(a(v).data("disabled",!0),a(".confirm","#"+a.jgrid.jqID(y.themodal)).show()):i()):i(),!1}),a("#cData",q).click(function(){return k()?(a.jgrid.hideModal("#"+a.jgrid.jqID(y.themodal),{gb:"#gbox_"+a.jgrid.jqID(u),jqm:d.jqModal,onClose:b[p.p.id].onClose,removemodal:b[p.p.id].removemodal,formprop:!b[p.p.id].recreateForm,form:b[p.p.id].form}),!1):!1}),a("#nData",q).click(function(){if(!k())return!1;a(".FormError",v).hide();var b=n();if(b[0]=parseInt(b[0],10),-1!==b[0]&&b[1][b[0]+1]){a(p).triggerHandler("jqGridAddEditClickPgButtons",["next",a(v),b[1][b[0]]]);var c;if(a.isFunction(d.onclickPgButtons)&&(c=d.onclickPgButtons.call(p,"next",a(v),b[1][b[0]]),void 0!==c&&c===!1))return!1;if(a("#"+a.jgrid.jqID(b[1][b[0]+1])).hasClass("ui-state-disabled"))return!1;g(b[1][b[0]+1],p,v),a(p).jqGrid("setSelection",b[1][b[0]+1]),a(p).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",a(v),b[1][b[0]]]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(p,"next",a(v),b[1][b[0]+1]),m(b[0]+1,b)}return!1}),a("#pData",q).click(function(){if(!k())return!1;a(".FormError",v).hide();var b=n();if(-1!==b[0]&&b[1][b[0]-1]){a(p).triggerHandler("jqGridAddEditClickPgButtons",["prev",a(v),b[1][b[0]]]);var c;if(a.isFunction(d.onclickPgButtons)&&(c=d.onclickPgButtons.call(p,"prev",a(v),b[1][b[0]]),void 0!==c&&c===!1))return!1;if(a("#"+a.jgrid.jqID(b[1][b[0]-1])).hasClass("ui-state-disabled"))return!1;g(b[1][b[0]-1],p,v),a(p).jqGrid("setSelection",b[1][b[0]-1]),a(p).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",a(v),b[1][b[0]]]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(p,"prev",a(v),b[1][b[0]-1]),m(b[0]-1,b)}return!1}),a(p).triggerHandler("jqGridAddEditAfterShowForm",[a(v),t]),a.isFunction(b[p.p.id].afterShowForm)&&b[p.p.id].afterShowForm.call(p,a("#"+v),t);var V=n();m(V[0],V)}}})},viewGridRow:function(c,d){var e=a.jgrid.getRegional(this[0],"view");return d=a.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0,recreateForm:!1,removemodal:!0,form:"view"},e,d||{}),b[a(this)[0].p.id]=d,this.each(function(){function e(){(b[j.p.id].closeOnEscape===!0||b[j.p.id].navkeys[0]===!0)&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(p.modalhead)).attr("tabindex","-1").focus()},0)}function f(b,c,e,f){var g,h,i,j,k,l,m,n,o,p=0,q=[],r=!1,s="<td class='CaptionTD form-view-label ui-widget-content' width='"+d.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",t="",u="<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>",v=["integer","number","currency"],w=0,x=0;for(l=1;f>=l;l++)t+=1===l?s:u;if(a(c.p.colModel).each(function(){h=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,h||"right"!==this.align||(this.formatter&&-1!==a.inArray(this.formatter,v)?w=Math.max(w,parseInt(this.width,10)):x=Math.max(x,parseInt(this.width,10)))}),m=0!==w?w:0!==x?x:0,r=a(c).jqGrid("getInd",b),a(c.p.colModel).each(function(b){if(g=this.name,n=!1,h=this.editrules&&this.editrules.edithidden===!0?!1:this.hidden===!0?!0:!1,k=h?"style='display:none'":"",o="boolean"!=typeof this.viewable?!0:this.viewable,"cb"!==g&&"subgrid"!==g&&"rn"!==g&&o){j=r===!1?"":g===c.p.ExpandColumn&&c.p.treeGrid===!0?a("td:eq("+b+")",c.rows[r]).text():a("td:eq("+b+")",c.rows[r]).html(),n="right"===this.align&&0!==m?!0:!1;var d=a.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),l=parseInt(d.rowpos,10)||p+1,s=parseInt(2*(parseInt(d.colpos,10)||1),10);if(d.rowabove){var u=a("<tr><td class='contentinfo' colspan='"+2*f+"'>"+d.rowcontent+"</td></tr>");a(e).append(u),u[0].rp=l}i=a(e).find("tr[rowpos="+l+"]"),0===i.length&&(i=a("<tr "+k+" rowpos='"+l+"'></tr>").addClass("FormData").attr("id","trv_"+g),a(i).append(t),a(e).append(i),i[0].rp=l),a("td:eq("+(s-2)+")",i[0]).html("<b>"+(void 0===d.label?c.p.colNames[b]:d.label)+"</b>"),a("td:eq("+(s-1)+")",i[0]).append("<span>"+j+"</span>").attr("id","v_"+g),n&&a("td:eq("+(s-1)+") span",i[0]).css({"text-align":"right",width:m+"px"}),q[p]=b,p++}}),p>0){var y=a("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*f-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+b+"'/></td></tr>");y[0].rp=p+99,a(e).append(y)}return q}function g(b,c){var d,e,f,g,h=0;g=a(c).jqGrid("getInd",b,!0),g&&(a("td",g).each(function(b){d=c.p.colModel[b].name,e=c.p.colModel[b].editrules&&c.p.colModel[b].editrules.edithidden===!0?!1:c.p.colModel[b].hidden===!0?!0:!1,"cb"!==d&&"subgrid"!==d&&"rn"!==d&&(f=d===c.p.ExpandColumn&&c.p.treeGrid===!0?a(this).text():a(this).html(),d=a.jgrid.jqID("v_"+d),a("#"+d+" span","#"+m).html(f),e&&a("#"+d,"#"+m).parents("tr:first").hide(),h++)}),h>0&&a("#id_g","#"+m).val(b))}function h(b,c){var d=c[1].length-1;0===b?a("#pData","#"+m+"_2").addClass("ui-state-disabled"):void 0!==c[1][b-1]&&a("#"+a.jgrid.jqID(c[1][b-1])).hasClass("ui-state-disabled")?a("#pData",m+"_2").addClass("ui-state-disabled"):a("#pData","#"+m+"_2").removeClass("ui-state-disabled"),b===d?a("#nData","#"+m+"_2").addClass("ui-state-disabled"):void 0!==c[1][b+1]&&a("#"+a.jgrid.jqID(c[1][b+1])).hasClass("ui-state-disabled")?a("#nData",m+"_2").addClass("ui-state-disabled"):a("#nData","#"+m+"_2").removeClass("ui-state-disabled")}function i(){var b=a(j).jqGrid("getDataIDs"),c=a("#id_g","#"+m).val(),d=a.inArray(c,b);return[d,b]}var j=this;if(j.grid&&c){var k=j.p.id,l="ViewGrid_"+a.jgrid.jqID(k),m="ViewTbl_"+a.jgrid.jqID(k),n="ViewGrid_"+k,o="ViewTbl_"+k,p={themodal:"viewmod"+k,modalhead:"viewhd"+k,modalcontent:"viewcnt"+k,scrollelm:l},q=a.isFunction(b[j.p.id].beforeInitData)?b[j.p.id].beforeInitData:!1,r=!0,s=1,t=0;d.recreateForm||a(j).data("viewProp")&&a.extend(b[a(this)[0].p.id],a(j).data("viewProp"));var u=isNaN(b[a(this)[0].p.id].dataheight)?b[a(this)[0].p.id].dataheight:b[a(this)[0].p.id].dataheight+"px",v=isNaN(b[a(this)[0].p.id].datawidth)?b[a(this)[0].p.id].datawidth:b[a(this)[0].p.id].datawidth+"px",w=a("<form name='FormPost' id='"+n+"' class='FormGrid' style='width:"+v+";overflow:auto;position:relative;height:"+u+";'></form>"),x=a("<table id='"+o+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(a(j.p.colModel).each(function(){var a=this.formoptions;s=Math.max(s,a?a.colpos||0:0),t=Math.max(t,a?a.rowpos||0:0)}),a(w).append(x),q&&(r=q.call(j,w),void 0===r&&(r=!0)),r!==!1){f(c,j,x,s);var y="rtl"===j.p.direction?!0:!1,z=y?"nData":"pData",A=y?"pData":"nData",B="<a id='"+z+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",C="<a id='"+A+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",D="<a id='cData' class='fm-button ui-state-default ui-corner-all'>"+d.bClose+"</a>";if(t>0){var E=[];a.each(a(x)[0].rows,function(a,b){E[a]=b}),E.sort(function(a,b){return a.rp>b.rp?1:a.rp<b.rp?-1:0}),a.each(E,function(b,c){a("tbody",x).append(c)})}d.gbox="#gbox_"+a.jgrid.jqID(k);var F=a("<div></div>").append(w).append("<table border='0' class='EditTable' id='"+m+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+d.labelswidth+"'>"+(y?C+B:B+C)+"</td><td class='EditButton'>"+D+"</td></tr></tbody></table>");a.jgrid.createModal(p,F,d,"#gview_"+a.jgrid.jqID(j.p.id),a("#gview_"+a.jgrid.jqID(j.p.id))[0]),y&&(a("#pData, #nData","#"+m+"_2").css("float","right"),a(".EditButton","#"+m+"_2").css("text-align","left")),d.viewPagerButtons||a("#pData, #nData","#"+m+"_2").hide(),F=null,a("#"+p.themodal).keydown(function(c){if(27===c.which)return b[j.p.id].closeOnEscape&&a.jgrid.hideModal("#"+a.jgrid.jqID(p.themodal),{gb:d.gbox,jqm:d.jqModal,onClose:d.onClose,removemodal:b[j.p.id].removemodal,formprop:!b[j.p.id].recreateForm,form:b[j.p.id].form}),!1;if(d.navkeys[0]===!0){if(c.which===d.navkeys[1])return a("#pData","#"+m+"_2").trigger("click"),!1;if(c.which===d.navkeys[2])return a("#nData","#"+m+"_2").trigger("click"),!1}}),d.closeicon=a.extend([!0,"left","ui-icon-close"],d.closeicon),d.closeicon[0]===!0&&a("#cData","#"+m+"_2").addClass("right"===d.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.closeicon[2]+"'></span>"),a.isFunction(d.beforeShowForm)&&d.beforeShowForm.call(j,a("#"+l)),a.jgrid.viewModal("#"+a.jgrid.jqID(p.themodal),{gbox:"#gbox_"+a.jgrid.jqID(k),jqm:d.jqModal,overlay:d.overlay,modal:d.modal,onHide:function(b){a(j).data("viewProp",{top:parseFloat(a(b.w).css("top")),left:parseFloat(a(b.w).css("left")),width:a(b.w).width(),height:a(b.w).height(),dataheight:a("#"+l).height(),datawidth:a("#"+l).width()}),b.w.remove(),b.o&&b.o.remove()}}),a(".fm-button:not(.ui-state-disabled)","#"+m+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),e(),a("#cData","#"+m+"_2").click(function(){return a.jgrid.hideModal("#"+a.jgrid.jqID(p.themodal),{gb:"#gbox_"+a.jgrid.jqID(k),jqm:d.jqModal,onClose:d.onClose,removemodal:b[j.p.id].removemodal,formprop:!b[j.p.id].recreateForm,form:b[j.p.id].form}),!1}),a("#nData","#"+m+"_2").click(function(){a("#FormError","#"+m).hide();var b=i();return b[0]=parseInt(b[0],10),-1!==b[0]&&b[1][b[0]+1]&&(a.isFunction(d.onclickPgButtons)&&d.onclickPgButtons.call(j,"next",a("#"+l),b[1][b[0]]),g(b[1][b[0]+1],j),a(j).jqGrid("setSelection",b[1][b[0]+1]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(j,"next",a("#"+l),b[1][b[0]+1]),h(b[0]+1,b)),e(),!1}),a("#pData","#"+m+"_2").click(function(){a("#FormError","#"+m).hide();var b=i();return-1!==b[0]&&b[1][b[0]-1]&&(a.isFunction(d.onclickPgButtons)&&d.onclickPgButtons.call(j,"prev",a("#"+l),b[1][b[0]]),g(b[1][b[0]-1],j),a(j).jqGrid("setSelection",b[1][b[0]-1]),a.isFunction(d.afterclickPgButtons)&&d.afterclickPgButtons.call(j,"prev",a("#"+l),b[1][b[0]-1]),h(b[0]-1,b)),e(),!1});var G=i();h(G[0],G)}}})},delGridRow:function(c,d){var e=a.jgrid.getRegional(this[0],"del");return d=a.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e,d||{}),b[a(this)[0].p.id]=d,this.each(function(){var e=this;
if(e.grid&&c){var f,g,h,i,j=a.isFunction(b[e.p.id].beforeShowForm),k=a.isFunction(b[e.p.id].afterShowForm),l=a.isFunction(b[e.p.id].beforeInitData)?b[e.p.id].beforeInitData:!1,m=e.p.id,n={},o=!0,p="DelTbl_"+a.jgrid.jqID(m),q="DelTbl_"+m,r={themodal:"delmod"+m,modalhead:"delhd"+m,modalcontent:"delcnt"+m,scrollelm:p};if(a.isArray(c)&&(c=c.join()),void 0!==a("#"+a.jgrid.jqID(r.themodal))[0]){if(l&&(o=l.call(e,a("#"+p)),void 0===o&&(o=!0)),o===!1)return;a("#DelData>td","#"+p).text(c),a("#DelError","#"+p).hide(),b[e.p.id].processing===!0&&(b[e.p.id].processing=!1,a("#dData","#"+p).removeClass("ui-state-active")),j&&b[e.p.id].beforeShowForm.call(e,a("#"+p)),a.jgrid.viewModal("#"+a.jgrid.jqID(r.themodal),{gbox:"#gbox_"+a.jgrid.jqID(m),jqm:b[e.p.id].jqModal,jqM:!1,overlay:b[e.p.id].overlay,modal:b[e.p.id].modal}),k&&b[e.p.id].afterShowForm.call(e,a("#"+p))}else{var s=isNaN(b[e.p.id].dataheight)?b[e.p.id].dataheight:b[e.p.id].dataheight+"px",t=isNaN(d.datawidth)?d.datawidth:d.datawidth+"px",u="<div id='"+q+"' class='formdata' style='width:"+t+";overflow:auto;position:relative;height:"+s+";'>";u+="<table class='DelTable'><tbody>",u+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",u+="<tr id='DelData' style='display:none'><td >"+c+"</td></tr>",u+='<tr><td class="delmsg" style="white-space:pre;">'+b[e.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",u+="</tbody></table></div>";var v="<a id='dData' class='fm-button ui-state-default ui-corner-all'>"+d.bSubmit+"</a>",w="<a id='eData' class='fm-button ui-state-default ui-corner-all'>"+d.bCancel+"</a>";if(u+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+p+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+v+"&#160;"+w+"</td></tr></tbody></table>",d.gbox="#gbox_"+a.jgrid.jqID(m),a.jgrid.createModal(r,u,d,"#gview_"+a.jgrid.jqID(e.p.id),a("#gview_"+a.jgrid.jqID(e.p.id))[0]),l&&(o=l.call(e,a(u)),void 0===o&&(o=!0)),o===!1)return;a(".fm-button","#"+p+"_2").hover(function(){a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}),d.delicon=a.extend([!0,"left","ui-icon-scissors"],b[e.p.id].delicon),d.cancelicon=a.extend([!0,"left","ui-icon-cancel"],b[e.p.id].cancelicon),d.delicon[0]===!0&&a("#dData","#"+p+"_2").addClass("right"===d.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.delicon[2]+"'></span>"),d.cancelicon[0]===!0&&a("#eData","#"+p+"_2").addClass("right"===d.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+d.cancelicon[2]+"'></span>"),a("#dData","#"+p+"_2").click(function(){var c,j=[!0,""],k=a("#DelData>td","#"+p).text();if(n={},a.isFunction(b[e.p.id].onclickSubmit)&&(n=b[e.p.id].onclickSubmit.call(e,b[e.p.id],k)||{}),a.isFunction(b[e.p.id].beforeSubmit)&&(j=b[e.p.id].beforeSubmit.call(e,k)),j[0]&&!b[e.p.id].processing){if(b[e.p.id].processing=!0,h=e.p.prmNames,f=a.extend({},b[e.p.id].delData,n),i=h.oper,f[i]=h.deloper,g=h.id,k=String(k).split(","),!k.length)return!1;for(c in k)k.hasOwnProperty(c)&&(k[c]=a.jgrid.stripPref(e.p.idPrefix,k[c]));f[g]=k.join(),a(this).addClass("ui-state-active");var l=a.extend({url:b[e.p.id].url||a(e).jqGrid("getGridParam","editurl"),type:b[e.p.id].mtype,data:a.isFunction(b[e.p.id].serializeDelData)?b[e.p.id].serializeDelData.call(e,f):f,complete:function(c,g){var h;if(a("#dData","#"+p+"_2").removeClass("ui-state-active"),c.status>=300&&304!==c.status?(j[0]=!1,j[1]=a.isFunction(b[e.p.id].errorTextFormat)?b[e.p.id].errorTextFormat.call(e,c):g+" Status: '"+c.statusText+"'. Error code: "+c.status):a.isFunction(b[e.p.id].afterSubmit)&&(j=b[e.p.id].afterSubmit.call(e,c,f)),j[0]===!1)a("#DelError>td","#"+p).html(j[1]),a("#DelError","#"+p).show();else{if(b[e.p.id].reloadAfterSubmit&&"local"!==e.p.datatype)a(e).trigger("reloadGrid");else{if(e.p.treeGrid===!0)try{a(e).jqGrid("delTreeNode",e.p.idPrefix+k[0])}catch(i){}else for(h=0;h<k.length;h++)a(e).jqGrid("delRowData",e.p.idPrefix+k[h]);e.p.selrow=null,e.p.selarrrow=[]}a.isFunction(b[e.p.id].afterComplete)&&setTimeout(function(){b[e.p.id].afterComplete.call(e,c,k)},500)}b[e.p.id].processing=!1,j[0]&&a.jgrid.hideModal("#"+a.jgrid.jqID(r.themodal),{gb:"#gbox_"+a.jgrid.jqID(m),jqm:d.jqModal,onClose:b[e.p.id].onClose})}},a.jgrid.ajaxOptions,b[e.p.id].ajaxDelOptions);if(l.url||b[e.p.id].useDataProxy||(a.isFunction(e.p.dataProxy)?b[e.p.id].useDataProxy=!0:(j[0]=!1,j[1]+=" "+a.jgrid.getRegional(e,"errors.nourl"))),j[0])if(b[e.p.id].useDataProxy){var o=e.p.dataProxy.call(e,l,"del_"+e.p.id);void 0===o&&(o=[!0,""]),o[0]===!1?(j[0]=!1,j[1]=o[1]||"Error deleting the selected row!"):a.jgrid.hideModal("#"+a.jgrid.jqID(r.themodal),{gb:"#gbox_"+a.jgrid.jqID(m),jqm:d.jqModal,onClose:b[e.p.id].onClose})}else"clientArray"===l.url?(f=l.data,l.complete({status:200,statusText:""},"")):a.ajax(l)}return j[0]===!1&&(a("#DelError>td","#"+p).html(j[1]),a("#DelError","#"+p).show()),!1}),a("#eData","#"+p+"_2").click(function(){return a.jgrid.hideModal("#"+a.jgrid.jqID(r.themodal),{gb:"#gbox_"+a.jgrid.jqID(m),jqm:b[e.p.id].jqModal,onClose:b[e.p.id].onClose}),!1}),j&&b[e.p.id].beforeShowForm.call(e,a("#"+p)),a.jgrid.viewModal("#"+a.jgrid.jqID(r.themodal),{gbox:"#gbox_"+a.jgrid.jqID(m),jqm:b[e.p.id].jqModal,overlay:b[e.p.id].overlay,modal:b[e.p.id].modal}),k&&b[e.p.id].afterShowForm.call(e,a("#"+p))}b[e.p.id].closeOnEscape===!0&&setTimeout(function(){a(".ui-jqdialog-titlebar-close","#"+a.jgrid.jqID(r.modalhead)).attr("tabindex","-1").focus()},0)}})},navGrid:function(b,c,d,e,f,g,h){var i=a.jgrid.getRegional(this[0],"nav");return c=a.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},i,c||{}),this.each(function(){if(!this.p.navGrid){var j,k,l,m={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},n=this;if(n.grid&&"string"==typeof b){a(n).data("navGrid")||a(n).data("navGrid",c),l=a(n).data("navGrid"),n.p.force_regional&&(l=a.extend(l,i)),void 0===a("#"+m.themodal)[0]&&(l.alerttop||l.alertleft||(void 0!==window.innerWidth?(l.alertleft=window.innerWidth,l.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(l.alertleft=document.documentElement.clientWidth,l.alerttop=document.documentElement.clientHeight):(l.alertleft=1024,l.alerttop=768),l.alertleft=l.alertleft/2-parseInt(l.alertwidth,10)/2,l.alerttop=l.alerttop/2-25),a.jgrid.createModal(m,"<div>"+l.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqModal:!0,drag:!0,resize:!0,caption:l.alertcap,top:l.alerttop,left:l.alertleft,width:l.alertwidth,height:l.alertheight,closeOnEscape:l.closeOnEscape,zIndex:l.alertzIndex},"#gview_"+a.jgrid.jqID(n.p.id),a("#gbox_"+a.jgrid.jqID(n.p.id))[0],!0));var o,p=1,q=function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},r=function(){a(this).removeClass("ui-state-hover")};for(l.cloneToTop&&n.p.toppager&&(p=2),o=0;p>o;o++){var s,t,u,v=a("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),w="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>";0===o?(t=b,u=n.p.id,t===n.p.toppager&&(u+="_top",p=1)):(t=n.p.toppager,u=n.p.id+"_top"),"rtl"===n.p.direction&&a(v).attr("dir","rtl").css("float","right"),e=e||{},l.add&&(s=a("<td class='ui-pg-button ui-corner-all'></td>"),a(s).append("<div class='ui-pg-div'><span class='ui-icon "+l.addicon+"'></span>"+l.addtext+"</div>"),a("tr",v).append(s),a(s,v).attr({title:l.addtitle||"",id:e.id||"add_"+u}).click(function(){return a(this).hasClass("ui-state-disabled")||(a.isFunction(l.addfunc)?l.addfunc.call(n):a(n).jqGrid("editGridRow","new",e)),!1}).hover(q,r),s=null),d=d||{},l.edit&&(s=a("<td class='ui-pg-button ui-corner-all'></td>"),a(s).append("<div class='ui-pg-div'><span class='ui-icon "+l.editicon+"'></span>"+l.edittext+"</div>"),a("tr",v).append(s),a(s,v).attr({title:l.edittitle||"",id:d.id||"edit_"+u}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=n.p.selrow;b?a.isFunction(l.editfunc)?l.editfunc.call(n,b):a(n).jqGrid("editGridRow",b,d):(a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(q,r),s=null),h=h||{},l.view&&(s=a("<td class='ui-pg-button ui-corner-all'></td>"),a(s).append("<div class='ui-pg-div'><span class='ui-icon "+l.viewicon+"'></span>"+l.viewtext+"</div>"),a("tr",v).append(s),a(s,v).attr({title:l.viewtitle||"",id:h.id||"view_"+u}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b=n.p.selrow;b?a.isFunction(l.viewfunc)?l.viewfunc.call(n,b):a(n).jqGrid("viewGridRow",b,h):(a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(q,r),s=null),f=f||{},l.del&&(s=a("<td class='ui-pg-button ui-corner-all'></td>"),a(s).append("<div class='ui-pg-div'><span class='ui-icon "+l.delicon+"'></span>"+l.deltext+"</div>"),a("tr",v).append(s),a(s,v).attr({title:l.deltitle||"",id:f.id||"del_"+u}).click(function(){if(!a(this).hasClass("ui-state-disabled")){var b;n.p.multiselect?(b=n.p.selarrrow,0===b.length&&(b=null)):b=n.p.selrow,b?a.isFunction(l.delfunc)?l.delfunc.call(n,b):a(n).jqGrid("delGridRow",b,f):(a.jgrid.viewModal("#"+m.themodal,{gbox:"#gbox_"+a.jgrid.jqID(n.p.id),jqm:!0}),a("#jqg_alrt").focus())}return!1}).hover(q,r),s=null),(l.add||l.edit||l.del||l.view)&&a("tr",v).append(w),g=g||{},l.search&&(s=a("<td class='ui-pg-button ui-corner-all'></td>"),a(s).append("<div class='ui-pg-div'><span class='ui-icon "+l.searchicon+"'></span>"+l.searchtext+"</div>"),a("tr",v).append(s),a(s,v).attr({title:l.searchtitle||"",id:g.id||"search_"+u}).click(function(){return a(this).hasClass("ui-state-disabled")||(a.isFunction(l.searchfunc)?l.searchfunc.call(n,g):a(n).jqGrid("searchGrid",g)),!1}).hover(q,r),g.showOnLoad&&g.showOnLoad===!0&&a(s,v).click(),s=null),l.refresh&&(s=a("<td class='ui-pg-button ui-corner-all'></td>"),a(s).append("<div class='ui-pg-div'><span class='ui-icon "+l.refreshicon+"'></span>"+l.refreshtext+"</div>"),a("tr",v).append(s),a(s,v).attr({title:l.refreshtitle||"",id:"refresh_"+u}).click(function(){if(!a(this).hasClass("ui-state-disabled")){a.isFunction(l.beforeRefresh)&&l.beforeRefresh.call(n),n.p.search=!1,n.p.resetsearch=!0;try{if("currentfilter"!==l.refreshstate){var b=n.p.id;n.p.postData.filters="";try{a("#fbox_"+a.jgrid.jqID(b)).jqFilter("resetFilter")}catch(c){}a.isFunction(n.clearToolbar)&&n.clearToolbar.call(n,!1)}}catch(d){}switch(l.refreshstate){case"firstpage":a(n).trigger("reloadGrid",[{page:1}]);break;case"current":case"currentfilter":a(n).trigger("reloadGrid",[{current:!0}])}a.isFunction(l.afterRefresh)&&l.afterRefresh.call(n)}return!1}).hover(q,r),s=null),k=a(".ui-jqgrid").css("font-size")||"11px",a("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+k+";visibility:hidden;' ></div>"),j=a(v).clone().appendTo("#testpg2").width(),a("#testpg2").remove(),a(t+"_"+l.position,t).append(v),n.p._nvtd&&(j>n.p._nvtd[0]&&(a(t+"_"+l.position,t).width(j),n.p._nvtd[0]=j),n.p._nvtd[1]=j),k=null,j=null,v=null,n.p.navGrid=!0}n.p.storeNavOptions&&(n.p.navOptions=l,n.p.editOptions=d,n.p.addOptions=e,n.p.delOptions=f,n.p.searchOptions=g,n.p.viewOptions=h)}}})},navButtonAdd:function(b,c){return c=a.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},c||{}),this.each(function(){if(this.grid){"string"==typeof b&&0!==b.indexOf("#")&&(b="#"+a.jgrid.jqID(b));var d=a(".navtable",b)[0],e=this;if(d){if(c.id&&void 0!==a("#"+a.jgrid.jqID(c.id),d)[0])return;var f=a("<td></td>");a(f).addClass("ui-pg-button ui-corner-all").append("NONE"===c.buttonicon.toString().toUpperCase()?"<div class='ui-pg-div'>"+c.caption+"</div>":"<div class='ui-pg-div'><span class='ui-icon "+c.buttonicon+"'></span>"+c.caption+"</div>"),c.id&&a(f).attr("id",c.id),"first"===c.position?0===d.rows[0].cells.length?a("tr",d).append(f):a("tr td:eq(0)",d).before(f):a("tr",d).append(f),a(f,d).attr("title",c.title||"").click(function(b){return a(this).hasClass("ui-state-disabled")||a.isFunction(c.onClickButton)&&c.onClickButton.call(e,b),!1}).hover(function(){a(this).hasClass("ui-state-disabled")||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(b,c){return c=a.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},c||{}),this.each(function(){if(this.grid){"string"==typeof b&&0!==b.indexOf("#")&&(b="#"+a.jgrid.jqID(b));var d=a(".navtable",b)[0];if(d){var e="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+c.sepclass+"'></span>"+c.sepcontent+"</td>";"first"===c.position?0===d.rows[0].cells.length?a("tr",d).append(e):a("tr td:eq(0)",d).before(e):a("tr",d).append(e)}}})},GridToForm:function(b,c){return this.each(function(){var d,e=this;if(e.grid){var f=a(e).jqGrid("getRowData",b);if(f)for(d in f)f.hasOwnProperty(d)&&(a("[name="+a.jgrid.jqID(d)+"]",c).is("input:radio")||a("[name="+a.jgrid.jqID(d)+"]",c).is("input:checkbox")?a("[name="+a.jgrid.jqID(d)+"]",c).each(function(){a(this).val()==f[d]?a(this)[e.p.useProp?"prop":"attr"]("checked",!0):a(this)[e.p.useProp?"prop":"attr"]("checked",!1)}):a("[name="+a.jgrid.jqID(d)+"]",c).val(f[d]))}})},FormToGrid:function(b,c,d,e){return this.each(function(){var f=this;if(f.grid){d||(d="set"),e||(e="first");var g=a(c).serializeArray(),h={};a.each(g,function(a,b){h[b.name]=b.value}),"add"===d?a(f).jqGrid("addRowData",b,h,e):"set"===d&&a(f).jqGrid("setRowData",b,h)}})}})});